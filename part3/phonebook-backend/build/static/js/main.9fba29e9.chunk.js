(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(15),o=t.n(a),i=t(6),u=t(3),l=t(4),s=t.n(l),d="/api/persons",j={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},create:function(e){return s.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},del:function(e){return s.a.delete("".concat(d,"/").concat(e))}},b=t(0),f=function(e){var n=e.filter,t=e.onChangeHandler;return Object(b.jsxs)("div",{children:["Filter shown with: ",Object(b.jsx)("input",{value:n,onChange:t})]})},h=function(e){var n=e.onSubmitHandler,t=e.name,r=e.onChangeNameHandler,c=e.number,a=e.onChangeNumberHandler;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["Name: ",Object(b.jsx)("input",{value:t,onChange:r})]}),Object(b.jsxs)("div",{children:["Number: ",Object(b.jsx)("input",{value:c,onChange:a})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var n=e.text,t=e.value,r=e.name,c=e.onClick;return Object(b.jsx)("button",{value:t,name:r,onClick:c,children:n})},O=function(e){var n=e.person,t=e.onClickHandler;return Object(b.jsxs)("p",{children:[n.name,": ",n.number," ",Object(b.jsx)(m,{text:"Delete",value:n.id,name:n.name,onClick:t})]})},v=function(e){var n=e.persons,t=e.onClickHandler;return n.map((function(e){return Object(b.jsx)(O,{person:e,onClickHandler:t},e.name)}))},p=function(){return Object(b.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:[Object(b.jsx)("br",{}),Object(b.jsxs)("em",{children:["Phonebook app, by GreenVan.",Object(b.jsx)("br",{}),"FullStackOpen course at University of Helsinki 2021"]})]})},x=function(e){var n=e.notification;return null===n?null:Object(b.jsx)("div",{className:n.type,children:n.message})},g=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),o=Object(u.a)(a,2),l=o[0],s=o[1],d=Object(r.useState)(""),m=Object(u.a)(d,2),O=m[0],g=m[1],C=Object(r.useState)(""),k=Object(u.a)(C,2),w=k[0],y=k[1],H=Object(r.useState)(null),S=Object(u.a)(H,2),N=S[0],A=S[1];Object(r.useEffect)((function(){j.getAll().then((function(e){c(e)}))}),[]);var E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"notification";A({message:e,type:n}),setTimeout((function(){A(null)}),5e3)},L=""===w?t:t.filter((function(e){return e.name.toLocaleLowerCase().includes(w.toLocaleLowerCase())}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(x,{notification:N}),Object(b.jsx)(f,{filter:w,onChangeHandler:function(e){y(e.target.value)}}),Object(b.jsx)("h2",{children:"Add a new"}),Object(b.jsx)(h,{onSubmitHandler:function(e){e.preventDefault();var n=t.find((function(e){return e.name===l}));if(n){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with the new one?"))){var r=Object(i.a)(Object(i.a)({},n),{},{number:O});j.update(n.id,r).then((function(e){E("'".concat(e.name,"' updated succesfully")),c(t.map((function(e){return e.name!==n.name?e:r}))),s(""),g("")})).catch((function(e){console.log(e),E("Error: ".concat(e.response.data.error),"error"),console.log(e.response.data.error)}))}}else{var a={name:l,number:O};j.create(a).then((function(e){E("Added '".concat(e.name,"'")),c(t.concat(e)),s(""),g("")})).catch((function(e){var n=JSON.stringify(e.response.data.error);E("Error: ".concat(n),"error"),console.log(e.response.data)}))}},name:l,onChangeNameHandler:function(e){s(e.target.value)},number:O,onChangeNumberHandler:function(e){g(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(v,{persons:L,onClickHandler:function(e){var n=e.target.name;if(window.confirm("Delete '".concat(n,"'?"))){var r=e.target.value;j.del(r).then((function(e){E("'".concat(n,"' deleted succesfully")),c(t.filter((function(e){return e.name!==n})))})).catch((function(e){E("The number of '".concat(n,"' was already removed from server"),"error"),c(t.filter((function(e){return e.name!==n})))}))}}}),Object(b.jsx)(p,{})]})};t(39);o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(g,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.9fba29e9.chunk.js.map